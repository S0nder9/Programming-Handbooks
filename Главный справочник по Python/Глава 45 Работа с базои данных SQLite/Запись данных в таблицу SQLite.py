# Глава 45: Работа с базой данных SQLite

# Запись данных в таблицу SQLite

# SQLite - это встроенная реляционная база данных, которая не требует отдельного сервера и работает на большинстве платформ.
# В Python поддержка SQLite встроена в стандартную библиотеку с помощью модуля sqlite3. Это делает работу с базами данных очень простой и удобной.

# Зачем используется запись данных в таблицу?
# В большинстве приложений необходимо сохранять данные на долгое время.
# Сохранение данных в базу данных позволяет хранить информацию организованно и эффективно, а также легко ее извлекать для дальнейшего использования.
# Например, вы можете сохранять данные о пользователях, их покупках, результатах опросов и т.д.

# Как это работает?
# Чтобы записать данные в таблицу SQLite, нужно сначала создать подключение к базе данных, затем создать курсор для выполнения SQL-запросов.
# После этого можно использовать SQL-запрос INSERT для добавления данных в таблицу.

# Шаги для записи данных в таблицу SQLite:
# 1. Подключиться к базе данных
# 2. Создать таблицу (если она еще не создана)
# 3. Подготовить данные для записи
# 4. Выполнить SQL-запрос для вставки данных
# 5. Закрыть соединение с базой данных

# Пример

import sqlite3

# 1. Подключаемся к базе данных (если файла базы данных не существует, он будет создан)
connection = sqlite3.connect('example.db')

# 2. Создаем объект курсора для выполнения SQL-запросов
cursor = connection.cursor()

# 3. Создаем таблицу (если она еще не существует)
cursor.execute('''
CREATE TABLE IF NOT EXISTS users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    age INTEGER NOT NULL
)
''')

# 4. Подготавливаем данные для вставки
user_data = [('Alice', 25), ('Bob', 30), ('Charlie', 22)]

# 5. Выполняем SQL-запрос для вставки данных
cursor.executemany('INSERT INTO users (name, age) VALUES (?, ?)', user_data)

# 6. Подтверждаем изменения в базе данных
connection.commit()

# 7. Закрываем соединение с базой данных
connection.close()

# Важные моменты:
# - В SQLite каждый запрос нужно выполнять через объект курсора.
# - После внесения изменений в базу данных нужно выполнить commit(), чтобы изменения сохранились.
# - После завершения работы с базой данных соединение следует закрывать через connection.close(), чтобы освободить ресурсы.

# Итог:
# Запись данных в таблицу SQLite - это простой процесс, который включает подключение к базе данных, создание таблицы (если необходимо),
# и выполнение SQL-запроса для вставки данных. Это позволяет сохранять и управлять данными в долговременной перспективе.

# Этот подход может использоваться в самых разных приложениях, от простых утилит до полноценных веб-приложений.
