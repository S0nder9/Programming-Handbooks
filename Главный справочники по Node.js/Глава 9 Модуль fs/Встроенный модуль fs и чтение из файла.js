// Глава 9: Модуль fs - Встроенный модуль fs и чтение из файла

// В Node.js модуль fs (файловая система) используется для работы с файлами и каталогами.
// Модуль fs предоставляет методы для чтения, записи, удаления и управления файлами и папками.

// Подключение модуля fs:
// Чтобы использовать модуль fs, необходимо подключить его с помощью require.
const fs = require('fs');

// Чтение из файла:
// Существует несколько способов чтения данных из файла. Наиболее распространенные методы - синхронное и асинхронное чтение.

// Асинхронное чтение файла:
// Асинхронный метод чтения файла не блокирует основной поток выполнения, что делает его предпочтительным для большинства приложений.
fs.readFile('example.txt', 'utf8', (err, data) => {
  if (err) {
    console.error('Ошибка при чтении файла:', err);
    return;
  }
  console.log('Содержимое файла:', data);
});

// В этом примере:
// - 'example.txt' - имя файла, который мы читаем.
// - 'utf8' - кодировка, используемая для чтения файла.
// - Функция обратного вызова принимает два аргумента: ошибку (err) и данные (data).

// Синхронное чтение файла:
// Синхронный метод чтения файла блокирует основной поток выполнения до тех пор, пока файл не будет полностью прочитан.
try {
  const data = fs.readFileSync('example.txt', 'utf8');
  console.log('Содержимое файла:', data);
} catch (err) {
  console.error('Ошибка при чтении файла:', err);
}

// В этом примере:
// - readFileSync('example.txt', 'utf8') - синхронное чтение файла с указанной кодировкой.
// - Если возникает ошибка, она обрабатывается в блоке catch.

// Чтение файла построчно:
// Для чтения файла построчно можно использовать модуль readline, который работает на основе потока данных.

const readline = require('readline');

const readStream = fs.createReadStream('example.txt', 'utf8');
const rl = readline.createInterface({ input: readStream });

rl.on('line', (line) => {
  console.log('Строка из файла:', line);
});

rl.on('close', () => {
  console.log('Чтение файла завершено.');
});

// В этом примере:
// - createReadStream создает поток для чтения данных из файла.
// - readline.createInterface создает интерфейс для чтения файла построчно.
// - Событие 'line' срабатывает при чтении каждой строки из файла.
// - Событие 'close' срабатывает, когда чтение файла завершено.

// Итог:
// Модуль fs в Node.js предоставляет мощные инструменты для работы с файлами.
// Вы можете использовать асинхронные и синхронные методы для чтения данных из файла, а также читать файл построчно с помощью модулей fs и readline.
// Асинхронные методы предпочтительны для большинства приложений, так как они не блокируют основной поток выполнения.
